define("arale/sticky/1.1.0/sticky",["$","arale/events/1.1.0/events","./utils"],function(t){function e(t){var i=this;return i instanceof e?(i.options=t,void 0):new e(t)}function i(t){var e=this;return e instanceof i?(e.options=t,void 0):new i(t)}function o(t,e){if(null==t)return-1;var i=Array.prototype;if(i&&t.indexOf===i)return t.indexOf(e);for(var o=0;t.length>o;o++)if(t[o]===e)return o;return-1}function n(t){var e=!1,i=t.css("float"),n=t.css("position"),r=t.css("display");if(-1!==o(["static","relative"],n)&&(e=!0),(-1!==o(["left","right"],i)||"block"!==r)&&(e=!1),e){var a=s('<div id="arale_fixed_placeholder_'+l+'" style="visibility: hidden;margin:0;padding:0;"></div>');a.width(t.outerWidth(!0)).height(t.outerHeight(!0)),t.data("placeholder_id",l++).after(a)}}function r(t){var e=t.data("placeholder_id");void 0!==e&&t.next("#arale_fixed_placeholder_"+e).remove()}var s=t("$"),a=t("arale/events/1.1.0/events"),p=t("./utils"),d=s(document),l=0,c=p.checkPositionFixedSupported(),u=p.checkPositionStickySupported(),f=p.stickyPrefix;return a.mixTo(e),e.prototype.render=function(){var t=this,e=t.elem=s(t.options.element);if(e.length&&!e.data("bind-fixed")){t._originTop=e.offset().top,t.marginTop=s.isNumeric(t.options.marginTop)?Math.min(t.options.marginTop,t._originTop):t._originTop,t._originStyles={position:null,top:null};for(var i in t._originStyles)t._originStyles.hasOwnProperty(i)&&(t._originStyles[i]=e.css(i));var o=c?s.proxy(t._supportFixed,t):s.proxy(t._supportAbsolute,t);return o(),s(window).on("scroll",function(){e.is(":visible")&&o()}),e.data("bind-fixed",!0),t}},e.prototype._supportFixed=function(){var t=this,e=t.elem,i=t._originTop,o=t.marginTop,r=i-d.scrollTop();!e.data("_fixed")&&o>=r?(n(e),e.css({position:"fixed",top:o}),e.data("_fixed",!0),t.trigger("stick",e)):e.data("_fixed")&&r>o&&t._restore()},e.prototype._supportAbsolute=function(){var t=this,e=t.elem,i=t._originTop,o=t.marginTop,r=i-d.scrollTop();o>=r?(n(e),e.css({position:"absolute",top:o+d.scrollTop()}),e.data("_fixed",!0),t.trigger("stick",e)):e.data("_fixed")&&r>o&&t._restore()},e.prototype._restore=function(){var t=this,e=t.elem;r(e),e.css(t._originStyles),e.data("_fixed",!1),t.trigger("restored",e)},e.prototype.destory=function(){var t=this;t.off(),r(t.elem)},a.mixTo(i),i.prototype.render=function(){var t=this,e=t.elem=s(t.options.element),i="";if(e.length&&!e.data("bind-fixed")){t._originTop=e.offset().top,t.marginTop=s.isNumeric(t.options.marginTop)?Math.min(t.options.marginTop,t._originTop):t._originTop;for(var o=0;f.length>o;o++)i+="position:"+f[o]+"sticky;";return e[0].style.cssText+=i+"top: "+t.marginTop+"px;",t._supportSticky(),s(window).on("scroll",function(){e.is(":visible")&&t._supportSticky()}),e.data("bind-fixed",!0),t}},i.prototype._supportSticky=function(){var t=this,e=t.elem,i=t._originTop,o=t.marginTop,n=i-d.scrollTop();!e.data("_fixed")&&o>=n?(e.data("_fixed",!0),t.trigger("stick",e)):e.data("_fixed")&&n>o&&(e.data("_fixed",!1),t.trigger("restored",e))},i.prototype.destory=function(){var t=this;t.off(),r(t.elem)},{stick:function(t,o){var n=u?i:e;return new n({element:t,marginTop:o})},fix:function(t){return new e({element:t}).render()}}}),define("arale/sticky/1.1.0/utils",[],function(){var t=document,e=["-webkit-","-ms-","-o-","-moz-",""],i=Date.now||function(){return+new Date};return{checkPositionFixedSupported:function(){var t=!1,e=document.createElement("div"),i=e.cloneNode(!1),o=!1,n=document.body||function(){return o=!0,document.documentElement.appendChild(document.createElement("body"))}(),r=n.style.cssText;return n.style.cssText="padding:0;margin:0",e.style.cssText="position:fixed;top:42px",n.appendChild(e),n.appendChild(i),t=e.offsetTop!==i.offsetTop,n.removeChild(e),n.removeChild(i),n.style.cssText=r,o&&document.documentElement.removeChild(n),t},checkPositionStickySupported:function(){var i=t.body;if(t.createElement&&i&&i.appendChild&&i.removeChild){var o,n=t.createElement("div"),r=function(t){return window.getComputedStyle?window.getComputedStyle(n).getPropertyValue(t):n.currentStyle.getAttribute(t)};i.appendChild(n);for(var s=0;e.length>s&&(n.style.cssText="position:"+e[s]+"sticky;visibility:hidden;",!(o=-1!==r("position").indexOf("sticky")));s++);return i.removeChild(n),o}return null},throttle:function(t,e,o){if(e=e||150,-1===e)return function(){t.apply(o||this,arguments)};var n=i();return function(){var r=i();r-n>e&&(n=r,t.apply(o||this,arguments))}},stickyPrefix:e}});
