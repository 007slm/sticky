define("arale/sticky/1.2.0/sticky",["$"],function(a,b,c){function d(a){this.options=a,this._stickyId=p++}function e(a){this.options=a,this._stickyId=p++}function f(a,b,c){var g=f.isPositionStickySupported?e:d;return new g({element:a,marginTop:b,callback:c}).render()}function g(){return!o}function h(){if(n)return!1;var a=k[0].body;if(k[0].createElement&&a&&a.appendChild&&a.removeChild){var b,c=k[0].createElement("div"),d=function(a){return window.getComputedStyle?window.getComputedStyle(c).getPropertyValue(a):c.currentStyle.getAttribute(a)};a.appendChild(c);for(var e=0;e<l.length&&(c.style.cssText="position:"+l[e]+"sticky;visibility:hidden;",!(b=-1!==d("position").indexOf("sticky")));e++);return c.parentNode.removeChild(c),b}return!1}function i(a,b){if(null==a)return-1;var c=Array.prototype.indexOf;if(c&&a.indexOf===c)return a.indexOf(b);for(var d=0;d<a.length;d++)if(a[d]===b)return d;return-1}var j=a("$"),k=j(document),l=["-webkit-","-ms-","-o-","-moz-",""],m=(window.navigator.userAgent||"").toLowerCase(),n=-1!==m.indexOf("msie"),o=-1!==m.indexOf("msie 6"),p=0,q=h(),r=g();d.prototype.render=function(){var a=this,b=a.elem=j(a.options.element);if(b.length&&!b.data("bind-fixed")){a._originTop=b.offset().top,a._originLeft=b.offset().left,a.marginTop=j.isNumeric(a.options.marginTop)?Math.min(a.options.marginTop,a._originTop):a._originTop,a._originStyles={position:null,top:null,left:null};for(var c in a._originStyles)a._originStyles.hasOwnProperty(c)&&(a._originStyles[c]=b.css(c));var d=f.isPositionFixedSupported?j.proxy(a._supportFixed,a):j.proxy(a._supportAbsolute,a);return f.isPositionFixedSupported||j("<style type='text/css'> * html { background:url(null) no-repeat fixed; } </style>").appendTo("head"),d(),j(window).on("scroll."+a._stickyId,function(){b.is(":visible")&&d()}),b.data("bind-fixed",!0),a}},d.prototype._supportFixed=function(){var a=this,b=a.elem,c=a._originTop,d=a.marginTop,e=c-k.scrollTop();!b.data("_fixed")&&d>=e?(a._addPlaceholder(),b.css({position:"fixed",top:d,left:a._originLeft}),b.data("_fixed",!0),j.isFunction(a.options.callback)&&a.options.callback.call(a,!0)):b.data("_fixed")&&e>d&&a._restore()},d.prototype._supportAbsolute=function(){var a=this,b=a.elem,c=a._originTop,d=a.marginTop,e=c-k.scrollTop();d>=e?(a._addPlaceholder(),b.css({position:"absolute",top:d+k.scrollTop()}),b.data("_fixed",!0),j.isFunction(a.options.callback)&&a.options.callback.call(a,!0)):b.data("_fixed")&&e>d&&a._restore()},d.prototype._restore=function(a){var b=this,c=b.elem;b._removePlaceholder(),c.css(b._originStyles),c.data("_fixed",!1),!a&&j.isFunction(b.options.callback)&&b.options.callback.call(b,!1)},d.prototype._addPlaceholder=function(){var a=this,b=a.elem,c=!1,d=b.css("float"),e=b.css("position"),f=b.css("display");-1!==i(["static","relative"],e)&&(c=!0),"block"!==f&&(c=!1),c&&(a._placeholder=j('<div style="visibility: hidden;margin:0;padding:0;"></div>'),a._placeholder.width(b.outerWidth(!0)).height(b.outerHeight(!0)).css("float",d).insertAfter(b))},d.prototype._removePlaceholder=function(){var a=this;a._placeholder&&a._placeholder.remove()},d.prototype.destory=function(){var a=this;a._restore(1),a.elem.data("bind-fixed",!1),j(window).off("scroll."+a._stickyId)},e.prototype.render=function(){var a=this,b=a.elem=j(a.options.element),c="";if(b.length&&!b.data("bind-fixed")){a._originTop=b.offset().top,a.marginTop=j.isNumeric(a.options.marginTop)?Math.min(a.options.marginTop,a._originTop):a._originTop,a._originStyles={position:null,top:null};for(var d in a._originStyles)a._originStyles.hasOwnProperty(d)&&(a._originStyles[d]=b.css(d));for(var e=0;e<l.length;e++)c+="position:"+l[e]+"sticky;";return b[0].style.cssText+=c+"top: "+a.marginTop+"px;",a._supportSticky(),j(window).on("scroll."+a._stickyId,function(){b.is(":visible")&&a._supportSticky()}),b.data("bind-fixed",!0),a}},e.prototype._supportSticky=function(){var a=this,b=a.elem,c=a._originTop,d=a.marginTop,e=c-k.scrollTop();!b.data("_fixed")&&d>=e?(b.data("_fixed",!0),j.isFunction(a.options.callback)&&a.options.callback.call(a,!0)):b.data("_fixed")&&e>d&&a._restore()},e.prototype._restore=function(a){var b=this,c=b.elem;c.css(b._originStyles),c.data("_fixed",!1),!a&&j.isFunction(b.options.callback)&&b.options.callback.call(b,!1)},e.prototype.destory=function(){var a=this;a._restore(1),a.elem.data("bind-fixed",!1),j(window).off("scroll."+a._stickyId)},f.stick=f,f.fix=function(a){return new d({element:a}).render()},f.isPositionFixedSupported=r,f.isPositionStickySupported=q,c.exports=f});
