define("arale/sticky/1.2.0/sticky",["$"],function(i,t,o){function e(i){this.options=i,this._stickyId=y++}function n(i){this.options=i,this._stickyId=y++}function r(i,t,o){var s=r.isPositionStickySupported?n:e;return new s({element:i,marginTop:t,callback:o}).render()}function s(){return!_}function l(){if(u)return!1;var i=d[0].body;if(d[0].createElement&&i&&i.appendChild&&i.removeChild){var t,o=d[0].createElement("div"),e=function(i){return window.getComputedStyle?window.getComputedStyle(o).getPropertyValue(i):o.currentStyle.getAttribute(i)};i.appendChild(o);for(var n=0;c.length>n&&(o.style.cssText="position:"+c[n]+"sticky;visibility:hidden;",!(t=-1!==e("position").indexOf("sticky")));n++);return o.parentNode.removeChild(o),t}return!1}function a(i,t){if(null==i)return-1;var o=Array.prototype.indexOf;if(o&&i.indexOf===o)return i.indexOf(t);for(var e=0;i.length>e;e++)if(i[e]===t)return e;return-1}var p=i("$"),d=p(document),c=["-webkit-","-ms-","-o-","-moz-",""],f=(window.navigator.userAgent||"").toLowerCase(),u=-1!==f.indexOf("msie"),_=-1!==f.indexOf("msie 6"),y=0,g=l(),h=s();e.prototype.render=function(){var i=this,t=i.elem=p(i.options.element);if(t.length&&!t.data("bind-fixed")){i._originTop=t.offset().top,i._originLeft=t.offset().left,i.marginTop=p.isNumeric(i.options.marginTop)?Math.min(i.options.marginTop,i._originTop):i._originTop,i._originStyles={position:null,top:null,left:null};for(var o in i._originStyles)i._originStyles.hasOwnProperty(o)&&(i._originStyles[o]=t.css(o));var e=r.isPositionFixedSupported?p.proxy(i._supportFixed,i):p.proxy(i._supportAbsolute,i);return r.isPositionFixedSupported||p("<style type='text/css'> * html { background:url(null) no-repeat fixed; } </style>").appendTo("head"),e(),p(window).on("scroll."+i._stickyId,function(){t.is(":visible")&&e()}),t.data("bind-fixed",!0),i}},e.prototype._supportFixed=function(){var i=this,t=i.elem,o=i._originTop,e=i.marginTop,n=o-d.scrollTop();!t.data("_fixed")&&e>=n?(i._addPlaceholder(),t.css({position:"fixed",top:e,left:i._originLeft}),t.data("_fixed",!0),p.isFunction(i.options.callback)&&i.options.callback.call(i,!0)):t.data("_fixed")&&n>e&&i._restore()},e.prototype._supportAbsolute=function(){var i=this,t=i.elem,o=i._originTop,e=i.marginTop,n=o-d.scrollTop();e>=n?(i._addPlaceholder(),t.css({position:"absolute",top:e+d.scrollTop()}),t.data("_fixed",!0),p.isFunction(i.options.callback)&&i.options.callback.call(i,!0)):t.data("_fixed")&&n>e&&i._restore()},e.prototype._restore=function(i){var t=this,o=t.elem;t._removePlaceholder(),o.css(t._originStyles),o.data("_fixed",!1),!i&&p.isFunction(t.options.callback)&&t.options.callback.call(t,!1)},e.prototype._addPlaceholder=function(){var i=this,t=i.elem,o=!1,e=t.css("float"),n=t.css("position"),r=t.css("display");-1!==a(["static","relative"],n)&&(o=!0),"block"!==r&&(o=!1),o&&(i._placeholder=p('<div style="visibility: hidden;margin:0;padding:0;"></div>'),i._placeholder.width(t.outerWidth(!0)).height(t.outerHeight(!0)).css("float",e).insertAfter(t))},e.prototype._removePlaceholder=function(){var i=this;i._placeholder&&i._placeholder.remove()},e.prototype.destory=function(){var i=this;i._restore(1),i.elem.data("bind-fixed",!1),p(window).off("scroll."+i._stickyId)},n.prototype.render=function(){var i=this,t=i.elem=p(i.options.element),o="";if(t.length&&!t.data("bind-fixed")){i._originTop=t.offset().top,i.marginTop=p.isNumeric(i.options.marginTop)?Math.min(i.options.marginTop,i._originTop):i._originTop,i._originStyles={position:null,top:null};for(var e in i._originStyles)i._originStyles.hasOwnProperty(e)&&(i._originStyles[e]=t.css(e));for(var n=0;c.length>n;n++)o+="position:"+c[n]+"sticky;";return t[0].style.cssText+=o+"top: "+i.marginTop+"px;",i._supportSticky(),p(window).on("scroll."+i._stickyId,function(){t.is(":visible")&&i._supportSticky()}),t.data("bind-fixed",!0),i}},n.prototype._supportSticky=function(){var i=this,t=i.elem,o=i._originTop,e=i.marginTop,n=o-d.scrollTop();!t.data("_fixed")&&e>=n?(t.data("_fixed",!0),p.isFunction(i.options.callback)&&i.options.callback.call(i,!0)):t.data("_fixed")&&n>e&&i._restore()},n.prototype._restore=function(i){var t=this,o=t.elem;o.css(t._originStyles),o.data("_fixed",!1),!i&&p.isFunction(t.options.callback)&&t.options.callback.call(t,!1)},n.prototype.destory=function(){var i=this;i._restore(1),i.elem.data("bind-fixed",!1),p(window).off("scroll."+i._stickyId)},r.stick=r,r.fix=function(i){return new e({element:i}).render()},r.isPositionFixedSupported=h,r.isPositionStickySupported=g,o.exports=r});
